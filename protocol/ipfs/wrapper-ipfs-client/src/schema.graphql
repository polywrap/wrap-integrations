#import { Module, Request, Response, ResponseType } into Http from "wrap://ens/http.polywrap.eth"

type Module {
  cat(
    cid: String!
    ipfsProvider: String!
    timeout: UInt32
    catOptions: CatOptions
  ): Bytes!

  resolve(
    cid: String!
    ipfsProvider: String!
    timeout: UInt32
    resolveOptions: ResolveOptions
  ): String!

  addFile(
    data: FileEntry!
    ipfsProvider: String!
    timeout: UInt32
    addOptions: AddOptions
  ): AddResult!

  addDir(
    data: DirectoryBlob!
    ipfsProvider: String!
    timeout: UInt32
    addOptions: AddOptions
  ): [AddResult!]!
}

type CatOptions {
  offset: Int32
  length: Int32
}

type AddOptions {
  pin: Boolean
  onlyHash: Boolean
  wrapWithDirectory: Boolean
}

type ResolveOptions {
  recursive: Boolean
  dhtRecordCount: Int32
  dhtTimeout: String
}

type AddResult {
  name: String!
  hash: String!
  size: String!
}

type FileEntry {
  name: String!
  data: Bytes!
}

type DirectoryEntry {
  name: String!
  directories: [DirectoryEntry!]!
  files: [FileEntry!]!
}

type DirectoryBlob {
  directories: [DirectoryEntry!]!
  files: [FileEntry!]!
}
